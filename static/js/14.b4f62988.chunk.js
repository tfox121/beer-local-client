(this["webpackJsonpbeer-local-client"]=this["webpackJsonpbeer-local-client"]||[]).push([[14],{1428:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(96),o=t(924),s=t(925),l=t(1414),i=t(920),u=t(129),d=t(130),m=t(29),b=t(30),p=t(43),f=Object(c.defineMessages)({header:{id:"".concat("app.containers.HomePage",".header"),defaultMessage:"Welcome to beerLocal"}}),g=t(314),h=t(87),E=t(921),v=t(916),y=t(1412),x=t(177),O=t(178),j=t(36),k=t(110),w=t(128),D="beerlocal/RetailerDashboardPage/FETCH_PRODUCER_FEED",F="beerlocal/RetailerDashboardPage/FETCH_PRODUCER_FEED_SUCCESS",C="beerlocal/RetailerDashboardPage/FETCH_PRODUCER_FEED_ERROR",S={fetchingProducerFeed:!1,fetchingProducerFeedError:!1,producerFeed:!1},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,a=arguments.length>1?arguments[1]:void 0;return Object(w.a)(e,(function(e){switch(a.type){default:break;case D:e.fetchingProducerFeedError=!1,e.fetchingProducerFeed=!0;break;case F:if(a.producerFeed){var t=a.producerFeed,r=t.followedProducers,n=t.nearbyProducers,c=r.map((function(e){return[].concat(Object(k.a)(e.stock),Object(k.a)(e.blog))})).map((function(e,a){return e.map((function(e){return Object(j.a)({producer:r[a].businessName,producerId:r[a].businessId,avatarSource:r[a].avatarSource},e)}))})).flat().sort((function(e,a){return e.createdAt>a.createdAt?-1:e.createdAt<a.createdAt?1:0})),o=c.reduce((function(e,a){var t=e;if(a.price&&"Show"===a.display){var r=a.firstDisplayed.split("T")[0];e["".concat(r,":").concat(a.producerId)]||(t["".concat(r,":").concat(a.producerId)]=[]),t["".concat(r,":").concat(a.producerId)].push(a)}return t}),{}),s=Object.keys(o).map((function(e){return{createdAt:e.split(":")[0],producerItems:o[e]}})),l=[].concat(Object(k.a)(c.filter((function(e){return!e.price}))),Object(k.a)(s),Object(k.a)(n)).sort((function(e,a){return e.createdAt>a.createdAt?-1:e.createdAt<a.createdAt?1:0}));console.log("SORTED",l),e.producerFeed=l,e.fetchingProducerFeedError=!1}e.fetchingProducerFeed=!1;break;case C:e.fetchingProducerFeedError=!0,e.fetchingProducerFeed=!1}}))},I=t(13),R=t.n(I),N=t(16),A=t(91),T=R.a.mark(H),M=R.a.mark(_),z=R.a.mark(B);function H(){var e,a,t;return R.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(N.a)(A.a);case 3:return e=r.sent,a=function(){return e.get("/retailer/producers")},r.next=7,Object(N.a)(a);case 7:if(t=r.sent,console.log("PRODUCER FEED RETRIEVED",t.data),!t.data){r.next=12;break}return r.next=12,Object(N.c)((c=t.data,{type:F,producerFeed:c}));case 12:r.next=18;break;case 14:return r.prev=14,r.t0=r.catch(0),r.next=18,Object(N.c)((n=r.t0,{type:C,error:n}));case 18:case"end":return r.stop()}var n,c}),T,null,[[0,14]])}function _(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.b)(2e3,D,H);case 2:case"end":return e.stop()}}),M)}function B(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(_);case 2:case"end":return e.stop()}}),z)}var U=t(45),L=t(46);function W(){var e=Object(U.a)(["\n  div.content {\n    div.summary {\n      height: 20px;\n    }\n    div.ui.segment {\n      max-width: 500px;\n      min-width: 500px;\n      margin: .5em 0 0;\n    }\n  }\n  div.images.extra {\n    display: flex;\n    img.circular {\n      min-width: 8em;\n    }\n\n    p {\n      font-size: 11px;\n      padding: 1em;\n    }\n  }\n  div.extra {\n    margin: 0;\n  }\n  .blog-text {\n    figure {\n      display: flex;\n      justify-content: center;\n    }\n\n    img {\n      display: block;\n      max-width: 100%;\n      max-height: 100%;\n      width: auto;\n      height: auto;\n    }\n  }\n"]);return W=function(){return e},e}var Y=L.b.div(W()),Q=t(100),J=t(68),G=t(472),V=t(1423),q=t(1411),K=t(959),X=t(323),Z=["","thousand","million","billion","trillion"],$=["zero","one","two","three","four","five","six","seven","eight","nine"],ee=["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],ae=["twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],te=function(e){var a=e;if((a=(a=a.toString()).replace(/[, ]/g,""))!=parseFloat(a))return"not a number";var t=a.indexOf(".");if(-1===t&&(t=a.length),t>15)return"too big";for(var r=a.split(""),n="",c=0,o=0;o<t;o+=1)(t-o)%3===2?"1"===r[o]?(n+="".concat(ee[Number(r[o+1])]," "),o+=1,c=1):0!==r[o]&&(n+="".concat(ae[r[o]-2]," "),c=1):0!==r[o]&&(n+="".concat($[r[o]]," "),(t-o)%3===0&&(n+="hundred "),c=1),(t-o)%3===1&&(c&&(n+="".concat(Z[(t-o-1)/3]," ")),c=0);if(t!==a.length){var s=a.length;n+="point ";for(var l=t+1;l<s;l+=1)n+="".concat($[r[l]]," ")}return n.replace(/\s+/g," ")},re=t(53),ne=t(54),ce=Object(m.b)({producerFollowing:Object(h.c)()});var oe=Object(b.c)(ce,(function(e){return{producerFollow:function(a){return e(Object(ne.c)(a))}}})),se=Object(p.d)(oe)((function(e){var a=e.producerItem,t=e.userProfile,c=e.producerFollow,l=e.producerFollowing,d=Object(r.useState)(!1),m=Object(J.a)(d,2),b=m[0],p=m[1];Object(r.useEffect)((function(){l||p(!1)}),[l]);var f,g,h,E=function(){var e=Object(Q.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(a.sub),p(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.blogData?(f=a,n.a.createElement(y.a.Event,{key:f._id},n.a.createElement(y.a.Label,null,n.a.createElement("img",{src:f.avatarSource||"/images/avatars/blank-avatar.webp",alt:"producer avatar"})),n.a.createElement(y.a.Content,null,n.a.createElement(y.a.Summary,null,n.a.createElement(y.a.User,{as:"p"},n.a.createElement(u.a,{to:"/brewery/".concat(f.producerId)},f.producer))," ","posted some news",n.a.createElement(y.a.Date,null,X.a.format(Date.parse(f.createdAt)))),n.a.createElement(y.a.Extra,{text:!0},n.a.createElement(o.a,null,n.a.createElement(s.a,null,n.a.createElement("i",null,f.title)),n.a.createElement("div",{className:"blog-text",dangerouslySetInnerHTML:{__html:Object(q.a)(K.EditorState.createWithContent(Object(K.convertFromRaw)(JSON.parse(f.blogData))).getCurrentContent())}})))))):a.producerItems&&a.producerItems.length?1===(g=a).producerItems.length?n.a.createElement(y.a.Event,{key:"".concat(g.createdAt).concat(g.producerItems[0].producerId)},n.a.createElement(y.a.Label,null,n.a.createElement("img",{src:g.producerItems[0].avatarSource||"/images/avatars/blank-avatar.webp",alt:"producer avatar"})),n.a.createElement(y.a.Content,null,n.a.createElement(y.a.Summary,null,n.a.createElement(y.a.User,{as:"p"},n.a.createElement(u.a,{to:"/brewery/".concat(g.producerItems[0].producerId)},g.producerItems[0].producer))," ","added a new beer",n.a.createElement(y.a.Date,null,X.a.format(Date.parse(g.producerItems[0].createdAt)))),n.a.createElement(o.a,null,n.a.createElement(y.a.Extra,{text:!0},g.producerItems[0].name," - ",te(Math.floor(g.producerItems[0].abv)).match("^[aieouAIEOU].*")?" an ":" a ",g.producerItems[0].abv,"% ",g.producerItems[0].style," ","in"," ",re.k[g.producerItems[0].packSize],"."),g.producerItems[0].imageSource&&n.a.createElement(y.a.Extra,{images:!0},n.a.createElement(G.a,{className:"product-image",size:"tiny",bordered:!0,centered:!0,circular:!0,src:g.producerItems[0].imageSource,alt:"product"}),n.a.createElement("p",null,g.producerItems[0].description))))):n.a.createElement(y.a.Event,{key:"".concat(g.createdAt).concat(g.producerItems[0].producerId)},n.a.createElement(y.a.Label,null,n.a.createElement("img",{src:g.producerItems[0].avatarSource||"/images/avatars/blank-avatar.webp",alt:"producer avatar"})),n.a.createElement(y.a.Content,null,n.a.createElement(y.a.Summary,null,n.a.createElement(y.a.User,{as:"p"},n.a.createElement(u.a,{to:"/brewery/".concat(g.producerItems[0].producerId)},g.producerItems[0].producer))," ","added"," ",g.producerItems.length," ","new beers",n.a.createElement(y.a.Date,null,X.a.format(Date.parse(g.producerItems[0].createdAt)))),n.a.createElement(o.a,null,g.producerItems.map((function(e,a){return n.a.createElement(n.a.Fragment,{key:e._id},n.a.createElement(y.a.Extra,{text:!0},e.name," - ",te(Math.floor(e.abv)).match("^[aieouAIEOU].*")?" an ":" a ",e.abv,"% ",e.style," ","in"," ",re.k[e.packSize],"."),e.imageSource&&n.a.createElement(y.a.Extra,{images:!0},n.a.createElement(G.a,{className:"product-image",size:"tiny",bordered:!0,centered:!0,circular:!0,src:e.imageSource,alt:"product"}),n.a.createElement("p",null,e.description)),a!==g.producerItems.length-1&&n.a.createElement(V.a,null))}))))):a.role?(h=a,n.a.createElement(y.a.Event,{key:h.businessId},n.a.createElement(y.a.Label,null,n.a.createElement("img",{src:"/images/site-logo.png",alt:"producer avatar"})),n.a.createElement(y.a.Content,null,n.a.createElement(y.a.Summary,null,n.a.createElement(y.a.User,{as:"div"},n.a.createElement(u.a,{to:"/brewery/".concat(h.businessId)},h.businessName))," ","has joined beerLocal, and they deliver to your area!",n.a.createElement(y.a.Date,null,X.a.format(Date.parse(h.createdAt)))),n.a.createElement(o.a,null,n.a.createElement(y.a.Extra,{images:!0,style:{flexDirection:"column"}},n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(G.a,{size:"small",centered:!0,src:h.avatarSource||"/images/avatars/blank-avatar.webp",alt:"product"}),n.a.createElement("p",{style:{marginBottom:"0",paddingTop:"0"}},h.intro)),n.a.createElement(i.a,{style:{maxWidth:"100px",maxHeight:"30px",alignSelf:"flex-end"},size:"mini",loading:b,positive:t.followedProducers.map((function(e){return e.sub})).includes(h.sub),icon:t.followedProducers.map((function(e){return e.sub})).includes(h.sub)?"check":"plus",content:t.followedProducers.map((function(e){return e.sub})).includes(h.sub)?"Following":"Follow",onClick:E})))))):null})),le=function(e){return e.RetailerDashboardPage||S},ie=Object(m.b)({userProfile:Object(h.e)(),producerFeed:Object(m.a)(le,(function(e){return e.producerFeed})),producerFeedFetching:Object(m.a)(le,(function(e){return e.fetchingProducerFeed}))});var ue=Object(b.c)(ie,(function(e){return{producerFeedFetch:function(){return e({type:D})}}})),de=Object(p.d)(ue)((function(e){var a=e.userProfile,t=e.producerFeedFetch,c=e.producerFeed,l=e.producerFeedFetching;return Object(x.a)({key:"RetailerDashboardPage",reducer:P}),Object(O.a)({key:"RetailerDashboardPage",saga:B}),Object(r.useEffect)((function(){t()}),[t]),c?n.a.createElement(g.a,null,l&&n.a.createElement(E.a,{inverted:!0,active:!0,page:!0},n.a.createElement(v.a,{inverted:!0})),n.a.createElement(o.a,{basic:!0,className:"primary wrapper"},n.a.createElement(s.a,{as:"h1"},"Updates"),n.a.createElement(Y,null,n.a.createElement(y.a,{size:"large"},c.map((function(e){return n.a.createElement(n.a.Fragment,{key:"producerItem._id-".concat(Math.random())},n.a.createElement(se,{producerItem:e,userProfile:a}))})))))):null})),me=t(990),be=t.n(me),pe=t(42),fe=t(922),ge=t(73),he=t(928),Ee=t(929),ve="beerlocal/ProducerDashboardPage/FETCH_PRODUCER_DASHBOARD",ye="beerlocal/ProducerDashboardPage/FETCH_PRODUCER_DASHBOARD_SUCCESS",xe="beerlocal/ProducerDashboardPage/FETCH_PRODUCER_DASHBOARD_ERROR",Oe={fetchingProducerDashboard:!1,fetchingProducerDashboardError:!1,dashboardOrders:!1,dashboardRetailers:!1},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,a=arguments.length>1?arguments[1]:void 0;return Object(w.a)(e,(function(e){switch(a.type){default:break;case ve:e.fetchingProducerDashboardError=!1,e.fetchingProducerDashboard=!0;break;case ye:if(a.producerDashboard){var t=Object(pe.merge)(a.producerDashboard.orders.orders,a.producerDashboard.orders.businesses.map((function(e){return Object(pe.pick)(e,["businessName","businessId","avatarSource","location"])}))),r=a.producerDashboard.retailers.retailers;e.dashboardOrders=t,e.dashboardRetailers=r,e.fetchingProducerDashboardError=!1}e.fetchingProducerDashboard=!1;break;case xe:a.error?e.fetchingProducerDashboardError=a.error:e.fetchingProducerDashboardError=!0,e.fetchingProducerDashboard=!1}}))},ke=R.a.mark(Fe),we=R.a.mark(Ce),De=R.a.mark(Se);function Fe(){var e,a,t,r,n;return R.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(N.a)(A.a);case 3:return e=c.sent,a=function(){return e.get("/orders")},c.next=7,Object(N.a)(a);case 7:return t=c.sent,r=function(){return e.get("/producer/retailers")},c.next=11,Object(N.a)(r);case 11:if(n=c.sent,console.log("PRODUCER DASHBOARD DATA RETRIEVED"),!t.data||!n.data){c.next=16;break}return c.next=16,Object(N.c)((s={orders:t.data,retailers:n.data},{type:ye,producerDashboard:s}));case 16:c.next=22;break;case 18:return c.prev=18,c.t0=c.catch(0),c.next=22,Object(N.c)((o=c.t0,{type:xe,error:o}));case 22:case"end":return c.stop()}var o,s}),ke,null,[[0,18]])}function Ce(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.b)(2e3,ve,Fe);case 2:case"end":return e.stop()}}),we)}function Se(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(Ce);case 2:case"end":return e.stop()}}),De)}function Pe(){var e=Object(U.a)(["\n\n  .my-masonry-grid {\n    display: -webkit-box; /* Not needed if autoprefixing */\n    display: -ms-flexbox; /* Not needed if autoprefixing */\n    display: flex;\n    margin-left: -30px; /* gutter size offset */\n    width: auto;\n  }\n  .my-masonry-grid_column {\n    padding-left: 30px; /* gutter size */\n    background-clip: padding-box;\n  }\n\n  /* Style your items */\n  .my-masonry-grid_column > div { /* change div to reference your elements you put in <Masonry> */\n  }\n\n  @media (max-width: 800px) {\n    .my-masonry-grid {\n      margin-left: -15px; /* gutter size offset */\n    }\n    .my-masonry-grid_column {\n      padding-left: 15px; /* gutter size offset */\n    }\n    .my-masonry-grid_column > div {\n      margin-bottom: 15px; /* space between items */\n    }\n  }\n\n  .sales-summary {\n    .ui.dividing.header {\n      margin-top: 0.75em;\n      margin-bottom: 10px;\n    }\n  }\n\n  .sales-averages {\n    .ui.header {\n      margin-top: 0;\n      margin-bottom: 5px;\n    }\n    .ui.header.top-level {\n      margin-top: 1.5em;\n    }\n    .ui.header.top-level:first-child {\n      margin-top: 0;\n    }\n  }\n"]);return Pe=function(){return e},e}var Ie=L.b.div(Pe()),Re=t(952),Ne=t(1235),Ae=function(e){var a=R.a.mark(D),t=R.a.mark(F),c=e.data,o=e.period,s=e.step,l=e.status,i=Object(r.useState)([]),u=Object(J.a)(i,2),d=u[0],m=u[1],b=Object(r.useState)([]),p=Object(J.a)(b,2),f=p[0],g=p[1],h=Object(r.useState)([]),E=Object(J.a)(h,2),v=E[0],y=E[1],x=Object(r.useState)([]),O=Object(J.a)(x,2),j=O[0],w=O[1];function D(e,t){var r,n;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=be()(),n=be()().subtract(1,e).add(1,t);case 2:if(!(n<=r)){a.next=8;break}return a.next=5,n.format();case 5:n.add(1,t),a.next=2;break;case 8:case"end":return a.stop()}}),a)}function F(e,a){var r,n;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=be()().subtract(1,e).subtract(1,"day"),n=be()().subtract(2,e).add(1,a).subtract(1,"day");case 2:if(!(n<=r)){t.next=8;break}return t.next=5,n.format();case 5:n.add(1,a),t.next=2;break;case 8:case"end":return t.stop()}}),t)}var C=function(e,a,t,r){return e.map((function(e){var n=0;return a.forEach((function(a){a.status===t&&be()(a.createdAt).isSame(e,r)&&(n+=Object(Re.a)(a.items))})),n}))};if(Object(r.useEffect)((function(){o&&s&&(m(Object(k.a)(D(o,s))),y(Object(k.a)(F(o,s))))}),[o,s]),Object(r.useEffect)((function(){if(c&&c.length&&d.length){var e=C(d,c,l,s);g(e);var a=C(v,c,l,s);w(a)}}),[c,d,v,l,s]),!f.length||!d.length)return null;var S={labels:d,datasets:[{label:"Current",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:3,pointHitRadius:10,spanGaps:!0,xAxisID:"x-axis",yAxisID:"y-axis",data:f},{label:"Last ".concat(o),fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"#cfcfcf",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"#cfcfcf",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"#cfcfcf",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,spanGaps:!0,xAxisID:"x-axis",yAxisID:"y-axis",data:j}]},P={legend:{display:!1},tooltips:{callbacks:{label:function(e){return"\xa3".concat(e.value)}}},scales:{yAxes:[{id:"y-axis",ticks:{maxTicksLimit:4,padding:10,suggestedMax:1.01*Math.max(f.reduce((function(e,a){return Math.max(e,a)})),j.reduce((function(e,a){return Math.max(e,a)}))),callback:function(e){return"\xa3".concat(e)}},gridLines:{drawBorder:!1,drawTicks:!1}}],xAxes:[{id:"x-axis",type:"time",time:{isoWeekday:!1,unit:s,tooltipFormat:{day:"ddd Do",week:"[Week from] Do MMM",month:"MMM YYYY",quarter:"[Q]Q 'YY"}[s],displayFormats:{day:"ddd Do",week:"Do MMM",quarter:"[Q]Q 'YY"}},ticks:{padding:5},gridLines:{zeroLineWidth:.5,intersect:!1}}]}};return n.a.createElement(Ne.a,{data:S,height:200,options:P})},Te=t(331),Me=t(234),ze=function(e){return e.ProducerDashboardPage||Oe},He=Object(m.b)({userProfile:Object(h.e)(),dashboardOrders:Object(m.a)(ze,(function(e){return e.dashboardOrders})),dashBoardRetailers:Object(m.a)(ze,(function(e){return e.dashboardRetailers})),producerDashboardFetching:Object(m.a)(ze,(function(e){return e.fetchingProducerDashboard}))});var _e=Object(b.c)(He,(function(e){return{producerDashboardFetch:function(){return e({type:ve})}}})),Be=Object(p.d)(_e)((function(e){var a=e.userProfile,t=e.producerDashboardFetch,c=e.dashboardOrders,l=e.dashBoardRetailers,d=e.producerDashboardFetching;Object(x.a)({key:"ProducerDashboardPage",reducer:je}),Object(O.a)({key:"ProducerDashboardPage",saga:Se});var m=Object(r.useState)("week"),b=Object(J.a)(m,2),p=b[0],f=b[1],h=Object(r.useState)({}),y=Object(J.a)(h,2),j=y[0],k=y[1],w=Object(r.useState)(0),D=Object(J.a)(w,2),F=D[0],C=D[1],S=Object(r.useState)(0),P=Object(J.a)(S,2),I=P[0],R=P[1],N=Object(r.useState)(0),A=Object(J.a)(N,2),T=A[0],M=A[1],z=Object(r.useState)(0),H=Object(J.a)(z,2),_=H[0],B=H[1],U=Object(r.useState)(0),L=Object(J.a)(U,2),W=L[0],Y=L[1],Q=Object(r.useState)([]),V=Object(J.a)(Q,2),q=V[0],K=V[1];Object(r.useEffect)((function(){t()}),[t]);var X=function(e,a,t){var r=0,n=0,c=0;return e.forEach((function(e){(t&&"Pending"===e.status&&be()(e.createdAt).isBetween(be()().subtract(2,a),be()().subtract(1,a))||!t&&"Pending"===e.status&&be()(e.createdAt).isAfter(be()().subtract(1,a)))&&(r+=Object(Re.a)(e.items),n+=1,e.items.forEach((function(e){c+=e.orderQuant})))})),{total:r,average:r/n,orderCount:n,itemCount:c,averageItems:c/n}};Object(r.useEffect)((function(){if(c.length){var e=X(c,p),a=X(c,p,!0);k(e),C(e.total-a.total),R(e.average-a.average),Y(e.averageItems-a.averageItems),M(e.orderCount-a.orderCount),B(e.itemCount-a.itemCount),K(function(e,a){var t=e.reduce((function(e,t){var r=e;return"Pending"===t.status&&be()(t.createdAt).isAfter(be()().subtract(1,a))&&(r[t.businessName]||(r[t.businessName]={businessName:t.businessName,businessId:t.businessId,avatarSource:t.avatarSource,location:t.location,salesTotal:0}),r[t.businessName].salesTotal+=Object(Re.a)(t.items)),r}),{});return Object(pe.values)(t).sort((function(e,a){return e.salesTotal>a.salesTotal?-1:e.salesTotal<a.salesTotal?1:0}))}(c,p))}}),[c,p]);var Z=Object(r.useMemo)((function(){return function(e,a){if(!e.length)return null;var t=e.reduce((function(e,t){var r=e;return"Pending"===t.status&&be()(t.createdAt).isAfter(be()().subtract(1,a))&&t.items.forEach((function(e){r[e.id]||(r[e.id]={id:e.id,name:e.name,packSize:e.packSize,imageSource:e.imageSource,salesTotal:0}),r[e.id].salesTotal+=e.orderQuant*e.price})),r}),{});return Object(pe.values)(t).sort((function(e,a){return e.salesTotal>a.salesTotal?-1:e.salesTotal<a.salesTotal?1:0}))}(c,p)}),[c,p]);return Object.keys(c).length&&Object.keys(j).length?(console.log(Number.isNaN(j.averageItems)),n.a.createElement(g.a,null,d&&n.a.createElement(E.a,{inverted:!0,active:!0,page:!0},n.a.createElement(v.a,{inverted:!0})),n.a.createElement(o.a,{basic:!0,className:"primary wrapper"},n.a.createElement(Ie,null,n.a.createElement(fe.a,{columns:2,verticalAlign:"middle"},n.a.createElement(fe.a.Column,{width:"10"},n.a.createElement(s.a,{as:"h1"},"Hi"," ",a.businessName,", ","here's how things are going.")),n.a.createElement(fe.a.Column,{width:"6",textAlign:"right"},n.a.createElement(i.a.Group,null,n.a.createElement(i.a,{active:"week"===p,onClick:function(){return f("week")}},"Week"),n.a.createElement(i.a,{active:"month"===p,onClick:function(){return f("month")}},"Month"),n.a.createElement(i.a,{active:"year"===p,onClick:function(){return f("year")}},"Year")))),n.a.createElement(o.a,{basic:!0},n.a.createElement(fe.a,{columns:3},n.a.createElement(fe.a.Column,{className:"sales-summary",width:6},n.a.createElement(s.a,null,"This"," ",p," ","you've sold"),n.a.createElement(s.a,{as:"h1",dividing:!0},"\xa3",j.total.toFixed(2)),"That's"," ",0===F?"exactly the same as":n.a.createElement(n.a.Fragment,null,"\xa3",Math.abs(F).toFixed(2)," ",F>0?"more":"less"," ","than")," ","last"," ",p,F>=0?"!":".",n.a.createElement(s.a,{as:"h3",dividing:!0},j.orderCount," ","orders"),"That's"," ",0===T?"exactly the same as":n.a.createElement(n.a.Fragment,null,Math.abs(T)," ",T>0?"more":"fewer"," ","than")," ","last"," ",p,T>=0?"!":".",n.a.createElement(s.a,{as:"h3",dividing:!0},j.itemCount," ","items"),"That's"," ",0===_?"exactly the same as":n.a.createElement(n.a.Fragment,null,Math.abs(_)," ",_>0?"more":"fewer"," ","than")," ","last"," ",p,_>=0?"!":"."),n.a.createElement(fe.a.Column,{width:7},n.a.createElement(o.a,null,n.a.createElement(Ae,{data:c,period:p,step:re.l[p],status:"Pending"}))),n.a.createElement(fe.a.Column,{className:"sales-averages",width:3},n.a.createElement(s.a,{as:"h5",className:"top-level"},"Average Sale Value"),n.a.createElement(s.a,null,Number.isNaN(j.average)?"No sales to go on!":"\xa3".concat(j.average.toFixed(2))),!Number.isNaN(I)&&n.a.createElement(n.a.Fragment,null,0===I?"Exactly the same as":n.a.createElement(n.a.Fragment,null,"\xa3",Math.abs(I).toFixed(2)," ",I>0?"more":"less"," ","than")," ","last"," ",p,I>=0?"!":"."),n.a.createElement(s.a,{as:"h5",className:"top-level"},"Average Items per Sale"),n.a.createElement(s.a,null,Number.isNaN(j.averageItems)?"No sales to go on!":j.averageItems.toFixed(1)),!Number.isNaN(W)&&n.a.createElement(n.a.Fragment,null,0===W?"Exactly the same as":n.a.createElement(n.a.Fragment,null,Math.abs(W).toFixed(1)," ",W>0?"more":"fewer"," ","than")," ","last"," ",p,W>=0?"!":".")))),n.a.createElement(o.a,null,n.a.createElement(s.a,{dividing:!0},"Top Customers"),n.a.createElement(fe.a,{columns:2},q.length?q.map((function(e){return n.a.createElement(fe.a.Row,{key:e.businessId},n.a.createElement(fe.a.Column,{width:12},n.a.createElement(G.a,{style:{marginRight:"0.5em"},avatar:!0,bordered:!0,centered:!0,src:e.avatarSource||"/images/avatars/blank-avatar.webp",alt:"user avatar"}),n.a.createElement(u.a,{to:"/brewery/".concat(e.businessId)},e.businessName)),n.a.createElement(fe.a.Column,{width:4},"\xa3",e.salesTotal.toFixed(2)))})):n.a.createElement(fe.a.Row,null,n.a.createElement(fe.a.Column,{width:16},"No customers so far this"," ",p,".")))),n.a.createElement(o.a,null,n.a.createElement(s.a,{dividing:!0},"Top Items"),n.a.createElement(fe.a,{columns:2,verticalAlign:"middle"},Z.length?Z.map((function(e){return n.a.createElement(fe.a.Row,{key:e.id},n.a.createElement(fe.a.Column,{width:8},n.a.createElement(G.a,{style:{marginRight:"0.5em"},avatar:!0,bordered:!0,centered:!0,src:e.imageSource||"/images/products/blank-product.png",alt:"product"}),e.name),n.a.createElement(fe.a.Column,{width:4},re.k[e.packSize]),n.a.createElement(fe.a.Column,{width:4},"\xa3",e.salesTotal.toFixed(2)))})):n.a.createElement(fe.a.Row,null,n.a.createElement(fe.a.Column,{width:16},"No items sold so far this"," ",p,".")))),n.a.createElement(o.a,null,n.a.createElement(he.a,{className:"profileViewMap",center:a.location,zoom:6,zoomControl:!1,style:{height:"400px"}},n.a.createElement(Ee.a,{url:re.g}),n.a.createElement(Te.a,{distributionAreas:a.distributionAreas}),n.a.createElement(Me.a,{location:a.location}),q.map((function(e){return n.a.createElement(Me.a,{key:e.businessName,type:"customer",location:e.location,name:e.businessName})})),l.filter((function(e){return!q.map((function(e){return e.businessName})).includes(e.businessName)})).map((function(e){return n.a.createElement(Me.a,{key:e.businessName,type:"not-customer",location:e.location,name:e.businessName})}))),n.a.createElement(ge.a,{style:{marginTop:"1em"},color:"blue",name:"map marker alternate"}),"- current customers"," ",n.a.createElement(ge.a,{color:"red",name:"map marker alternate"}),"- potential customers"))))):null}));function Ue(){var e=Object(U.a)(["\n  height: 100%;\n  min-height: calc(100vh - 49px);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n\n  .ui.segment {\n    z-index: 2;\n  }\n\n  div.ui.header.primary {\n    color: #FDFDF0;\n    font-size: 5em;\n    font-family: 'Yantramanav', sans-serif;\n    font-weight: 700;\n    margin: 0;\n    letter-spacing: 1px;\n    line-height: 100%;\n  }\n\n  h5.ui.header.sub-header {\n    color: #FDFDF0;\n    font-size: 1.5em;\n    font-family: 'Yantramanav', sans-serif;\n    font-weight: 400;\n    margin: 0 0 1em 0;\n    letter-spacing: 0.5px;\n  }\n\n  .full-page {\n    z-index: 1;\n  }\n\n  .full-page::after {\n    background-color: rgba(0, 0, 0, 0.75);\n    content: ' ';\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n    opacity: 1;\n    background-size: cover;\n    background-position: center;\n  }\n\n  .full-page::before {\n    background-image: url(\"./images/homepage-background-1.jpg\");\n    content: ' ';\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n    opacity: 1;\n    background-size: cover;\n    background-position: center;\n    filter: blur(2px);\n  }\n"]);return Ue=function(){return e},e}var Le=L.b.div(Ue()),We=Object(m.b)({userProfile:Object(h.e)()}),Ye=Object(b.c)(We);a.default=Object(p.d)(Ye)((function(e){var a=e.userProfile,t=Object(d.b)().isAuthenticated;console.log("HOME");var r;return n.a.createElement(n.a.Fragment,null,(r=a,t&&!r?n.a.createElement(g.a,null,n.a.createElement(o.a,{basic:!0,className:"primary wrapper"},n.a.createElement(s.a,{as:"h1"},n.a.createElement(c.FormattedMessage,f.header)),n.a.createElement(l.a,null,n.a.createElement(l.a.Header,null,"Create your profile"),n.a.createElement("p",null,"Click"," ",n.a.createElement("strong",null,n.a.createElement(u.a,{to:"/create"},"here"))," ","to get started.")))):r&&"retailer"===r.role?n.a.createElement(de,null):r&&"producer"===r.role?n.a.createElement(Be,null):n.a.createElement(g.a,null,n.a.createElement(Le,null,n.a.createElement("div",{className:"full-page"}),n.a.createElement(o.a,{basic:!0,textAlign:"center"},n.a.createElement(s.a,{className:"primary"},"BeerLocal"),n.a.createElement(s.a,{as:"h5",className:"sub-header"},"Buy local. Sell local."),n.a.createElement(i.a,{size:"large",inverted:!0,icon:"angle right",labelPosition:"right",content:"Get Started"}))))))}))},952:function(e,a,t){"use strict";a.a=function(e){return e.reduce((function(e,a){return e+="delete"!==a.orderChange&&a.price*a.orderQuant}),0)}}}]);
//# sourceMappingURL=14.b4f62988.chunk.js.map