(this["webpackJsonpbeer-local-client"]=this["webpackJsonpbeer-local-client"]||[]).push([[11],{1001:function(e,t,n){"use strict";t.a=function(e,t,n){return"product"===t?"".concat("https://dhv76unj4lzad.cloudfront.net/").concat(e,"/").concat(t,"/").concat(n,".png"):"".concat("https://dhv76unj4lzad.cloudfront.net/").concat(e,"/").concat(t,".png")}},1003:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m}));var a=n(13),r=n.n(a),o=n(100),i=n(303),c=n.n(i);function l(e){for(var t=e.split(",")[0].split(":")[1].split(";")[0],n=atob(e.split(",")[1]),a=[],r=0;r<n.length;r+=1)a.push(n.charCodeAt(r));return new Blob([new Uint8Array(a)],{type:t})}var u=n(91),s=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)();case 2:return a=e.sent,e.next=5,a.post("/image",{type:t,productId:n});case 5:return o=e.sent,console.log(o),e.abrupt("return",o.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,Object.keys(t.fields).forEach((function(e){a.set(e,t.fields[e])})),a.set("file",l(n)),e.abrupt("return",c.a.post(t.url,a,{headers:{"Content-Type":"multipart/form-data"}}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},1036:function(e,t,n){"use strict";var a=n(45);function r(){var e=Object(a.a)(["\n  height: 100%;\n  width: 100%;\n\n  .leaflet-container {\n    width: 95%;\n    height: 50vh;\n    display: block;\n    z-index: 1;\n    margin: 2em auto;\n  }\n"]);return r=function(){return e},e}var o=n(46).b.div(r());t.a=o},1391:function(e,t,n){var a=n(474),r=n(476),o=n(111);e.exports=function(e,t){var n={};return t=o(t,3),r(e,(function(e,r,o){a(n,r,t(e,r,o))})),n}},1392:function(e,t,n){var a=n(474),r=n(1393)((function(e,t,n){a(e,n,t)}));e.exports=r},1393:function(e,t,n){var a=n(1394),r=n(1395),o=n(111),i=n(38);e.exports=function(e,t){return function(n,c){var l=i(n)?a:r,u=t?t():{};return l(n,e,o(c,2),u)}}},1394:function(e,t){e.exports=function(e,t,n,a){for(var r=-1,o=null==e?0:e.length;++r<o;){var i=e[r];t(a,i,n(i),e)}return a}},1395:function(e,t,n){var a=n(134);e.exports=function(e,t,n,r){return a(e,(function(e,a,o){t(r,e,n(e),o)})),r}},1429:function(e,t,n){"use strict";n.r(t),n.d(t,"CreateProfilePage",(function(){return $e}));var a=n(13),r=n.n(a),o=n(100),i=n(36),c=n(68),l=n(0),u=n.n(l),s=n(30),m=n(29),b=n(43),d=n(924),p=n(925),f=n(921),g=n(916),h=n(967),E=n.n(h),v=n(130),O=n(319),j=n(54),C=n(922),w=n(73),y=n(45),N=n(46);function S(){var e=Object(y.a)(["\n  margin-top: auto;\n\n  button {\n    background: none;\n    border: none;\n    cursor: pointer;\n  }\n"]);return S=function(){return e},e}var k=N.b.div(S()),x=n(53),T=function(e){var t=e.profileStage,n=e.backClickHandler,a=e.forwardClickHandler,r=e.handleSubmit,o=function(){return u.a.createElement(C.a.Column,{width:"2",as:"button",onClick:n},u.a.createElement(w.a,{name:"angle left",size:"big"}),"Back")};switch(t){case 0:return null;case x.n:return u.a.createElement(k,null,u.a.createElement(C.a,{textAlign:"center"},u.a.createElement(C.a.Row,null,o(),u.a.createElement(C.a.Column,{width:"12"}),u.a.createElement(C.a.Column,{width:"2",as:"button",onClick:r},u.a.createElement(w.a,{name:"check",size:"large"}),"Complete"))));default:return u.a.createElement(k,null,u.a.createElement(C.a,{textAlign:"center"},u.a.createElement(C.a.Row,null,o(),u.a.createElement(C.a.Column,{width:"12"}),u.a.createElement(C.a.Column,{width:"2",as:"button",onClick:a},u.a.createElement(w.a,{name:"angle right",size:"big"}),"Continue"))))}};function I(){var e=Object(y.a)(['\n\ndiv.two.column.grid {\n  margin: auto;\n  height: 90%;\n  width: 90%;\n}\n\ndiv.two.column.grid > div.row {\n  height: 90%;\n  width: 90%;\n}\n/*\n.two.column.grid >  .row > button.column.typeSelector.brewery {\n  margin-right: 2px;\n} */\n\n.two.column.grid >  .row > button.column.typeSelector {\n  position: relative;\n  overflow: hidden;\n  background: none;\n  z-index: 1;\n  border: none;\n  cursor: pointer;\n  color: white;\n  min-height: 75vh;\n}\n\n.two.column.grid >  .row > button.column.typeSelector::after {\n  content: \' \';\n  display: block;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n  opacity: 0.5;\n  background-size: cover;\n  background-position: center;\n}\n\n.two.column.grid >  .row > button.column.typeSelector.producer::after {\n  background-image: url("./images/profileCreation/breweryBackground.jpg");\n}\n\n.two.column.grid >  .row > button.column.typeSelector.retailer::after {\n  background-image: url("./images/profileCreation/retailerBackground.jpg");\n}\n']);return I=function(){return e},e}var A=N.b.div(I()),M=function(e){var t=e.profileStage,n=e.formValues,a=e.setFormValues,r=e.setProfileStage,o=Object(l.useState)(!0),s=Object(c.a)(o,2),m=s[0],b=s[1];return Object(l.useEffect)((function(){b(0===t)}),[t]),m&&u.a.createElement(A,null,u.a.createElement(C.a,{columns:2,divided:!0,centered:!0},u.a.createElement(C.a.Row,null,u.a.createElement(C.a.Column,{className:"typeSelector producer",as:"button",width:7,textAlign:"center",onClick:function(){a(Object(i.a)(Object(i.a)({},n),{},{type:"producer"})),r(1)}},u.a.createElement(p.a,{as:"h1"},"Producer")),u.a.createElement(C.a.Column,{width:1}),u.a.createElement(C.a.Column,{className:"typeSelector retailer",as:"button",width:7,textAlign:"center",onClick:function(){a(Object(i.a)(Object(i.a)({},n),{},{type:"retailer"})),r(1)}},u.a.createElement(p.a,{as:"h1"},"Retailer")))))},R=n(176),F=n(928),_=n(929),D=n(1430),G=n(1022),z=n(997),V=n(234),U=n(998);function W(){var e=Object(y.a)(["\n  height: 70%;\n  width: 100%;\n\n  .leaflet-container {\n    width: 97%;\n    height: 80%;\n    display: block;\n    z-index: 1;\n    margin-top: 2em;\n  }\n"]);return W=function(){return e},e}var P=N.b.div(W()),q=n(472),H=n(920),X=n(1431),L=n(1023),B=n(1024),J=n.n(B);function K(){var e=Object(y.a)(["\n  position: relative;\n  width: 100%;\n\n  button.button.image-button {\n    border-radius: 50%;\n    width: 48px;\n    height: 48px;\n    margin: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    -ms-transform: translate(-50%, -50%);\n    background-color: #555;\n    color: white;\n    font-size: 16px;\n    padding: 12px 24px;\n    border: none;\n    cursor: pointer;\n\n    i.camera.icon {\n      height: auto;\n    }\n  }\n"]);return K=function(){return e},e}var Y=N.b.div(K()),Q=function(e){var t=e.avatarSaved,n=e.setAvatarSaved,a=Object(l.useState)({}),r=Object(c.a)(a,2),o=r[0],i=r[1],s=Object(l.useState)(1),m=Object(c.a)(s,2),b=m[0],d=m[1],p=Object(l.useState)(!1),f=Object(c.a)(p,2),g=f[0],h=f[1],E=Object(l.createRef)(),v=Object(l.createRef)();Object(l.useEffect)((function(){o?o.name&&h(!0):h(!1)}),[o]);var O={start:1,min:.5,max:3,step:.05,onChange:function(e){d(e)}};return u.a.createElement(u.a.Fragment,null,u.a.createElement("strong",null,"Profile Picture"),u.a.createElement(Y,null,u.a.createElement(q.a,{className:"profile-image",src:t||"/images/avatars/blank-avatar.webp",size:"small",bordered:!0,centered:!0,circular:!0}),u.a.createElement(H.a,{inverted:!0,circular:!0,basic:!0,className:"image-button",icon:"camera",onClick:function(){return v.current.click()}}),u.a.createElement("input",{id:"avatarUpload",ref:v,type:"file",accept:".png,.jpg,.jpeg,.svg,.webp,.gif",hidden:!0,onChange:function(e){return i(e.target.files[0])}})),u.a.createElement(X.a,{className:"image-resizer",open:g,onClose:function(){i({}),h(!1)}},u.a.createElement(X.a.Header,null,u.a.createElement(H.a,{floated:"left",basic:!0,icon:"left arrow",onClick:function(){return h(!1)}}),"Edit picture"," ",u.a.createElement(H.a,{primary:!0,floated:"right",content:"Apply",onClick:function(){if(E.current){var e=E.current.getImageScaledToCanvas();o.name&&(i({}),n(e.toDataURL()))}h(!1)}})),u.a.createElement(J.a,{ref:E,image:o.name?o:void 0,width:o.name?300:750,height:o.name?300:250,border:25,scale:b,color:[255,255,255,.6]}),u.a.createElement(X.a.Content,null,u.a.createElement(L.Slider,{value:b,color:"blue",settings:O}))))},Z=function(e){var t=e.formValues,n=e.setFormValues,a=e.formErrors,r=e.setFormErrors,o=e.profileStage,s=e.mapCentre,m=e.setMapCentre,b=e.avatarSaved,d=e.setAvatarSaved,p=Object(l.useState)(5),f=Object(c.a)(p,2),g=f[0],h=f[1],E=Object(l.useState)(!1),v=Object(c.a)(E,2),O=v[0],j=v[1],w=Object(l.useState)(""),y=Object(c.a)(w,2),N=y[0],S=y[1],k=Object(l.useRef)(null);Object(l.useEffect)((function(){1!==o||"producer"!==t.type?j(!1):j(!0)}),[t.type,o]),Object(l.useEffect)((function(){t.location&&t.location.lat&&(m([t.location.lat,t.location.lng]),h(15))}),[m,t.location]),Object(l.useEffect)((function(){var e=Object(i.a)({},a),o=function(e,o){var c=o.name,l=o.value,u=Object(i.a)({},a);delete u[c],r(Object(i.a)({},u)),n(Object(i.a)(Object(i.a)({},t),{},Object(R.a)({},c,l)))};delete e.salesContactNumber,r(Object(i.a)({},e)),""===N?(z.a.reset(null),o(0,{name:"salesContactNumber",value:""})):(z.a.reset(N),o(0,{name:"salesContactNumber",value:z.a.number()}))}),[N,a,r,t,n]);var T=function(e,o){var c=o.name,l=o.value,u=Object(i.a)({},a);delete u[c],r(Object(i.a)({},u)),n(Object(i.a)(Object(i.a)({},t),{},Object(R.a)({},c,l)))};return O&&u.a.createElement(C.a,{centered:!0,columns:2},u.a.createElement(C.a.Row,null,u.a.createElement(C.a.Column,{width:10},u.a.createElement(D.a,null,u.a.createElement(D.a.Input,{label:"Brewery name",name:"businessName",value:t.businessName,required:!0,onChange:T,error:a.businessName&&{content:a.businessName,pointing:"above"}}),u.a.createElement(D.a.Input,{label:"Sales contact name",name:"primaryContactName",value:t.primaryContactName,required:!0,onChange:T,error:a.primaryContactName&&{content:a.primaryContactName,pointing:"above"}}),u.a.createElement(D.a.Input,{label:"Sales email address",name:"salesEmail",type:"email",value:t.salesEmail,required:!0,onChange:T,error:a.salesEmail&&{content:a.salesEmail,pointing:"above"}}),u.a.createElement(D.a.Input,{label:"Sales contact number",name:"salesContactNumber",type:"tel",value:t.salesContactNumber,onChange:function(e){return S(e.target.value)},error:a.salesContactNumber&&{content:a.salesContactNumber,pointing:"above"}}),u.a.createElement(D.a.Input,{label:"Website",name:"website",type:"url",value:t.website,onChange:T}),u.a.createElement("div",{className:"".concat(a.location&&"error"," required field")},u.a.createElement(U.a,null,u.a.createElement(G.a,{ref:k,label:"Location",id:"breweryLocation",location:new google.maps.LatLng(s[0],s[1]),radius:"1500",minlegnth:"3",country:"gb",onSuggestSelect:function(e){if(e){console.log(e);var o=e.location,c=e.gmaps,l=Object(i.a)({},a);delete l.location,r(Object(i.a)({},l)),n(Object(i.a)(Object(i.a)({},t),{},{location:o,address:c.formatted_address}))}},onBlur:function(){return k.current.selectSuggest()},autoActivateFirstSuggest:!0,required:!0})),a.location&&u.a.createElement("div",{className:"ui pointing above prompt label",role:"alert","aria-atomic":"true"},"This field is required")),u.a.createElement("br",null),u.a.createElement(D.a.TextArea,{label:"Intro",placeholder:"Tell us more about the brewery...",value:t.intro,name:"intro",onChange:T,maxLength:x.f}),!!t.intro.length&&u.a.createElement("p",{style:{textAlign:"right",fontSize:"10px"}},t.intro.length,"/",x.f),u.a.createElement(D.a.Checkbox,{label:"I agree to the Terms and Conditions",name:"terms",checked:t.terms,required:!0,onChange:function(){var e=Object(i.a)({},a);delete e.terms,r(Object(i.a)({},e)),n(Object(i.a)(Object(i.a)({},t),{},{terms:!t.terms}))},error:a.terms&&{content:a.terms,pointing:"right"}}))),u.a.createElement(C.a.Column,{width:6},u.a.createElement(Q,{avatarSaved:b,setAvatarSaved:d}),t.location&&t.location.lat&&u.a.createElement(P,null,u.a.createElement(F.a,{center:s,zoom:g,zoomControl:!1},u.a.createElement(_.a,{url:x.g}),u.a.createElement(V.a,{location:t.location}))))))},$=n(35),ee=n.n($),te=n(21),ne=n.n(te),ae=n(22),re=n.n(ae),oe=n(23),ie=n.n(oe),ce=n(18),le=n.n(ce),ue=n(3),se=n.n(ue),me=n(24),be=n.n(me),de=n(1),pe=n.n(de),fe=n(125),ge=n.n(fe),he=n(12),Ee=n.n(he),ve=n(92),Oe=n.n(ve),je=n(9),Ce=n.n(je),we=n(6),ye=n.n(we),Ne=(n(7),n(501)),Se=n(8),ke=n(33),xe=n(244),Te=n.n(xe),Ie=n(317),Ae=n.n(Ie),Me=n(240),Re=n.n(Me),Fe=n(1391),_e=n.n(Fe),De=n(332),Ge=n(172),ze=n(171),Ve=function(e){function t(){var e,n;ne()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n=ie()(this,(e=le()(t)).call.apply(e,[this].concat(r))),pe()(se()(n),"handleOnHide",(function(e,t){var a=t.reactKey;n.setState((function(e){var t=ee()({},e.children);return delete t[a],{children:t}}))})),pe()(se()(n),"wrapChild",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.props,r=a.animation,o=a.directional,i=a.duration,c=e.key,l=t.visible,s=void 0===l||l,m=t.transitionOnMount,b=void 0!==m&&m;return u.a.createElement(We,{animation:r,directional:o,duration:i,key:c,onHide:n.handleOnHide,reactKey:c,transitionOnMount:b,visible:s},e)}));var i=n.props.children;return n.state={children:_e()(Object(De.a)(i),(function(e){return n.wrapChild(e)}))},n}return be()(t,e),re()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.state.children,a=Object(De.a)(e.children),r=Object(De.b)(n,a);Re()(r,(function(e,o){var i=Ae()(n,o),c=Ae()(a,o),u=n[o],s=!Oe()(u,"props.visible");if(!c||i&&!s)if(c||!i||s){var m=u.props,b=m.visible,d=m.transitionOnMount;r[o]=t.wrapChild(e,{transitionOnMount:d,visible:b})}else r[o]=Object(l.cloneElement)(u,{visible:!1});else r[o]=t.wrapChild(e,{transitionOnMount:!0})})),this.setState({children:r})}},{key:"render",value:function(){var e=this.state.children,n=Object(Ge.a)(t,this.props),a=Object(ze.a)(t,this.props);return u.a.createElement(n,a,Te()(e))}}]),t}(u.a.Component);pe()(Ve,"defaultProps",{as:l.Fragment,animation:"fade",duration:500}),pe()(Ve,"handledProps",["animation","as","children","directional","duration"]),Ve.propTypes={};var Ue={ENTERING:"show",EXITING:"hide"},We=function(e){function t(){var e,n;ne()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n=ie()(this,(e=le()(t)).call.apply(e,[this].concat(r))),pe()(se()(n),"handleStart",(function(){var e=n.props.duration,t=n.nextStatus;n.nextStatus=null,n.setState({status:t,animating:!0},(function(){var a=Ue[t],r=Object(Ne.a)(e,a);Ce()(n.props,"onStart",null,ee()({},n.props,{status:t})),n.timeoutId=setTimeout(n.handleComplete,r)}))})),pe()(se()(n),"handleComplete",(function(){var e=n.state.status;if(Ce()(n.props,"onComplete",null,ee()({},n.props,{status:e})),n.nextStatus)n.handleStart();else{var a=n.computeCompletedStatus(),r=e===t.ENTERING?"onShow":"onHide";n.setState({status:a,animating:!1},(function(){Ce()(n.props,r,null,ee()({},n.props,{status:a}))}))}})),pe()(se()(n),"updateStatus",(function(){var e=n.state.animating;n.nextStatus&&(n.nextStatus=n.computeNextStatus(),e||n.handleStart())})),pe()(se()(n),"computeClasses",(function(){var e=n.props,a=e.animation,r=e.directional,o=e.children,i=n.state,c=i.animating,l=i.status,u=Oe()(o,"props.className");return(Ee()(r)?ge()(Se.a.DIRECTIONAL_TRANSITIONS,a):r)?ye()(a,u,Object(ke.a)(c,"animating"),Object(ke.a)(l===t.ENTERING,"in"),Object(ke.a)(l===t.EXITING,"out"),Object(ke.a)(l===t.EXITED,"hidden"),Object(ke.a)(l!==t.EXITED,"visible"),"transition"):ye()(a,u,Object(ke.a)(c,"animating transition"))})),pe()(se()(n),"computeCompletedStatus",(function(){var e=n.props.unmountOnHide;return n.state.status===t.ENTERING?t.ENTERED:e?t.UNMOUNTED:t.EXITED})),pe()(se()(n),"computeInitialStatuses",(function(){var e=n.props,a=e.visible,r=e.mountOnShow,o=e.transitionOnMount,i=e.unmountOnHide;return a?o?{initial:t.EXITED,next:t.ENTERING}:{initial:t.ENTERED}:r||i?{initial:t.UNMOUNTED}:{initial:t.EXITED}})),pe()(se()(n),"computeNextStatus",(function(){var e=n.state,a=e.animating,r=e.status;return a?r===t.ENTERING?t.EXITING:t.ENTERING:r===t.ENTERED?t.EXITING:t.ENTERING})),pe()(se()(n),"computeStatuses",(function(e){var a=n.state.status;return e.visible?{current:a===t.UNMOUNTED&&t.EXITED,next:a!==t.ENTERING&&a!==t.ENTERED&&t.ENTERING}:{next:(a===t.ENTERING||a===t.ENTERED)&&t.EXITING}})),pe()(se()(n),"computeStyle",(function(){var e=n.props,t=e.children,a=e.duration,r=n.state.status,o=Oe()(t,"props.style"),i=Ue[r],c=i&&"".concat(Object(Ne.a)(a,i),"ms");return ee()({},o,{animationDuration:c})}));var i=n.computeInitialStatuses(),c=i.initial,l=i.next;return n.nextStatus=l,n.state={status:c},n}return be()(t,e),re()(t,[{key:"componentDidMount",value:function(){this.updateStatus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.computeStatuses(e),n=t.current,a=t.next;this.nextStatus=a,n&&this.setState({status:n})}},{key:"componentDidUpdate",value:function(){this.updateStatus()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e=this.props.children;return this.state.status===t.UNMOUNTED?null:Object(l.cloneElement)(e,{className:this.computeClasses(),style:this.computeStyle()})}}]),t}(l.Component);pe()(We,"defaultProps",{animation:"fade",duration:500,visible:!0,mountOnShow:!0,transitionOnMount:!1,unmountOnHide:!1}),pe()(We,"ENTERED","ENTERED"),pe()(We,"ENTERING","ENTERING"),pe()(We,"EXITED","EXITED"),pe()(We,"EXITING","EXITING"),pe()(We,"UNMOUNTED","UNMOUNTED"),pe()(We,"Group",Ve),pe()(We,"handledProps",["animation","children","directional","duration","mountOnShow","onComplete","onHide","onShow","onStart","reactKey","transitionOnMount","unmountOnHide","visible"]),We.propTypes={};var Pe=n(1414),qe=n(908),He=n(1137),Xe=n(1036),Le=function(e){var t=e.formValues,n=e.setFormValues,a=e.formErrors,r=e.setFormErrors,o=e.profileStage,s=e.mapCentre,m=Object(l.useState)(!1),b=Object(c.a)(m,2),d=b[0],p=b[1];Object(l.useEffect)((function(){2!==o||"producer"!==t.type?p(!1):p(!0)}),[t.type,o]);var f=null,g=function e(){if(f&&e){var o=f.leafletElement.toGeoJSON(),c=Object(i.a)({},a);delete c.distributionAreas,r(Object(i.a)({},c)),n(Object(i.a)(Object(i.a)({},t),{},{distributionAreas:o}))}};return u.a.createElement(We.Group,{animation:"fade",duration:{hide:500,show:2e3}},d&&u.a.createElement(u.a.Fragment,null,u.a.createElement("p",null,"Use the tools at the top right to draw shapes corresponding to the areas that you distribute to.",u.a.createElement("br",null),'Make sure to complete your shape by clicking the first point again or the "Finish" button at the top right.',u.a.createElement("br",null),'Hit "Complete" below when you\'re done'),u.a.createElement(Xe.a,null,u.a.createElement(F.a,{center:s,zoom:10,zoomControl:!1},u.a.createElement(_.a,{url:x.g}),u.a.createElement(V.a,{location:t.location}),u.a.createElement(qe.a,{ref:function(e){!function(e){e&&(f=e)}(e)}},u.a.createElement(He.a,{position:"topright",onEdited:function(){g()},onCreated:function(e){var t=e.layerType;console.log("onCreated: something else created:",t,e),g()},onDeleted:function(){g()},draw:{rectangle:!1,circle:!1,circlemarker:!1,polyline:!1,marker:!1,polygon:{allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!"},shapeOptions:{color:"#009dd6"}}}})))),a.distributionAreas&&u.a.createElement(Pe.a,{warning:!0},u.a.createElement(Pe.a.Header,null,"Error"),u.a.createElement("p",null,a.distributionAreas))))},Be=function(e){var t=e.formValues,n=e.setFormValues,a=e.formErrors,r=e.setFormErrors,o=e.profileStage,s=e.mapCentre,m=e.setMapCentre,b=e.avatarSaved,d=e.setAvatarSaved,p=Object(l.useState)(5),f=Object(c.a)(p,2),g=f[0],h=f[1],E=Object(l.useState)(!1),v=Object(c.a)(E,2),O=v[0],j=v[1],w=Object(l.useState)(""),y=Object(c.a)(w,2),N=y[0],S=y[1],k=Object(l.useRef)(null);Object(l.useEffect)((function(){1!==o||"retailer"!==t.type?j(!1):j(!0)}),[t.type,o]),Object(l.useEffect)((function(){t.location&&t.location.lat&&(m([t.location.lat,t.location.lng]),h(15))}),[m,t.location]),Object(l.useEffect)((function(){var e=Object(i.a)({},a),o=function(e,o){var c=o.name,l=o.value,u=Object(i.a)({},a);delete u[c],r(Object(i.a)({},u)),n(Object(i.a)(Object(i.a)({},t),{},Object(R.a)({},c,l)))};delete e.purchasingContactNumber,r(Object(i.a)({},e)),""===N?(z.a.reset(null),o(0,{name:"purchasingContactNumber",value:""})):(z.a.reset(N),o(0,{name:"purchasingContactNumber",value:z.a.number()}))}),[N,a,r,t,n]);var T=function(e,o){var c=o.name,l=o.value,u=Object(i.a)({},a);delete u[c],r(Object(i.a)({},u)),n(Object(i.a)(Object(i.a)({},t),{},Object(R.a)({},c,l)))};return O&&u.a.createElement(C.a,{centered:!0,columns:2},u.a.createElement(C.a.Row,null,u.a.createElement(C.a.Column,{width:10},u.a.createElement(D.a,null,u.a.createElement(D.a.Input,{label:"Premises name",name:"businessName",value:t.businessName,required:!0,onChange:T,error:a.businessName&&{content:a.businessName,pointing:"above"}}),u.a.createElement(D.a.Input,{label:"Primary contact name",name:"primaryContactName",value:t.primaryContactName,required:!0,onChange:T,error:a.primaryContactName&&{content:a.primaryContactName,pointing:"above"}}),u.a.createElement(D.a.Input,{label:"Purchasing email address",name:"purchasingEmail",type:"email",value:t.purchasingEmail,required:!0,onChange:T,error:a.purchasingEmail&&{content:a.purchasingEmail,pointing:"above"}}),u.a.createElement(D.a.Input,{label:"Purchasing contact number",name:"purchasingContactNumber",type:"tel",value:t.purchasingContactNumber,onChange:function(e){return S(e.target.value)},error:a.purchasingContactNumber&&{content:a.purchasingContactNumber,pointing:"above"}}),u.a.createElement("div",{className:"".concat(a.location&&"error"," required field")},u.a.createElement(U.a,null,u.a.createElement(G.a,{ref:k,label:"Location",id:"Location",location:new google.maps.LatLng(s[0],s[1]),radius:"1500",minlegnth:"3",country:"gb",onSuggestSelect:function(e){if(e){var o=e.location,c=e.gmaps,l=Object(i.a)({},a);delete l.location,r(Object(i.a)({},l)),n(Object(i.a)(Object(i.a)({},t),{},{location:o,address:c.formatted_address}))}},onBlur:function(){return k.current.selectSuggest()},autoActivateFirstSuggest:!0,required:!0})),a.location&&u.a.createElement("div",{className:"ui pointing above prompt label",role:"alert","aria-atomic":"true"},"This field is required")),u.a.createElement("br",null),u.a.createElement(D.a.TextArea,{label:"Delivery Instruction",placeholder:"Any delivery restrictions or instructions...",value:t.deliveryInstruction,name:"deliveryInstruction",onChange:T,maxLength:x.e}),!!t.deliveryInstruction.length&&u.a.createElement("p",{style:{textAlign:"right",fontSize:"10px"}},t.deliveryInstruction.length,"/",x.e),u.a.createElement(D.a.Checkbox,{label:"I agree to the Terms and Conditions",name:"terms",checked:t.terms,required:!0,onChange:function(){var e=Object(i.a)({},a);delete e.terms,r(Object(i.a)({},e)),n(Object(i.a)(Object(i.a)({},t),{},{terms:!t.terms}))},error:a.terms&&{content:a.terms,pointing:"right"}}))),u.a.createElement(C.a.Column,{width:6},u.a.createElement(Q,{avatarSaved:b,setAvatarSaved:d}),t.location&&t.location.lat&&u.a.createElement(P,null,u.a.createElement(F.a,{center:s,zoom:g,zoomControl:!1},u.a.createElement(_.a,{url:x.g}),u.a.createElement(V.a,{location:t.location}))))))},Je=function(e){var t=e.formValues,n=e.setFormValues,a=e.profileStage,r=Object(l.useState)(!1),o=Object(c.a)(r,2),s=o[0],m=o[1],b=t.contactOptions;return Object(l.useEffect)((function(){2!==a||"retailer"!==t.type?m(!1):m(!0)}),[t.type,a]),u.a.createElement(We.Group,{animation:"fade",duration:{hide:500,show:2e3}},s&&u.a.createElement(u.a.Fragment,null,u.a.createElement(d.a,{textAlign:"left",basic:!0},u.a.createElement(p.a,{as:"h2"},"Notification preferences"),u.a.createElement("p",null,"Choose how you receive notifications"),u.a.createElement(D.a,null,u.a.createElement(d.a.Group,null,u.a.createElement(d.a,null,u.a.createElement(p.a,{as:"h3"},"Orders"),u.a.createElement("p",null,"Notifications for any orders you place, including confirmations, reminders, etc."),u.a.createElement(C.a,null,u.a.createElement(C.a.Column,{width:2},u.a.createElement(D.a.Checkbox,{label:"Email",name:"ordersEmail",checked:b.ordersEmail||!1,onChange:function(){return n(Object(i.a)(Object(i.a)({},t),{},{contactOptions:Object(i.a)(Object(i.a)({},b),{},{ordersEmail:!b.ordersEmail})}))}})),u.a.createElement(C.a.Column,{width:14},u.a.createElement(D.a.Checkbox,{label:"Web & Mobile",name:"ordersWebMobile",checked:b.ordersWebMobile||!1,onChange:function(){return n(Object(i.a)(Object(i.a)({},t),{},{contactOptions:Object(i.a)(Object(i.a)({},b),{},{ordersWebMobile:!b.ordersWebMobile})}))}})))),u.a.createElement(d.a,null,u.a.createElement(p.a,{as:"h3"},"Following"),u.a.createElement("p",null,"Contact from breweries that you follow."),u.a.createElement(C.a,null,t.purchasingContactNumber&&u.a.createElement(C.a.Column,{width:2},u.a.createElement(D.a.Checkbox,{label:"Phone",name:"followingPhone",checked:b.followingPhone||!1,onChange:function(){return n(Object(i.a)(Object(i.a)({},t),{},{contactOptions:Object(i.a)(Object(i.a)({},b),{},{followingPhone:!b.followingPhone})}))}})),u.a.createElement(C.a.Column,{width:2},u.a.createElement(D.a.Checkbox,{label:"Email",name:"followingEmail",checked:b.followingEmail||!1,onChange:function(){return n(Object(i.a)(Object(i.a)({},t),{},{contactOptions:Object(i.a)(Object(i.a)({},b),{},{followingEmail:!b.followingEmail})}))}})),u.a.createElement(C.a.Column,{width:12,stretched:!0},u.a.createElement(D.a.Checkbox,{label:"Web & Mobile",name:"followingWebMobile",checked:b.followingWebMobile||!1,onChange:function(){return n(Object(i.a)(Object(i.a)({},t),{},{contactOptions:Object(i.a)(Object(i.a)({},b),{},{followingWebMobile:!b.followingWebMobile})}))}})))),u.a.createElement(d.a,null,u.a.createElement(p.a,{as:"h3"},"Upcoming"),u.a.createElement("p",null,"Contact from us about new and upcoming breweries in your area."),u.a.createElement(C.a,null,u.a.createElement(C.a.Column,{width:2},u.a.createElement(D.a.Checkbox,{label:"Email",name:"upcomingEmail",checked:b.upcomingEmail||!1,onChange:function(){return n(Object(i.a)(Object(i.a)({},t),{},{contactOptions:Object(i.a)(Object(i.a)({},b),{},{upcomingEmail:!b.upcomingEmail})}))}})),u.a.createElement(C.a.Column,{width:14},u.a.createElement(D.a.Checkbox,{label:"Web & Mobile",name:"upcomingWebMobile",checked:b.upcomingWebMobile||!1,onChange:function(){return n(Object(i.a)(Object(i.a)({},t),{},{contactOptions:Object(i.a)(Object(i.a)({},b),{},{upcomingWebMobile:!b.upcomingWebMobile})}))}})))),u.a.createElement(d.a,null,u.a.createElement(p.a,{as:"h3"},"Us!"),u.a.createElement("p",null,"Occasional curated content from us with news and events in your area."),u.a.createElement(C.a,null,u.a.createElement(C.a.Column,{width:2},u.a.createElement(D.a.Checkbox,{label:"Email",name:"usEmail",checked:b.usEmail||!1,onChange:function(){return n(Object(i.a)(Object(i.a)({},t),{},{contactOptions:Object(i.a)(Object(i.a)({},b),{},{usEmail:!b.usEmail})}))}})),u.a.createElement(C.a.Column,{width:14},u.a.createElement(D.a.Checkbox,{label:"Web & Mobile",name:"usWebMobile",checked:b.usWebMobile||!1,onChange:function(){return n(Object(i.a)(Object(i.a)({},t),{},{contactOptions:Object(i.a)(Object(i.a)({},b),{},{usWebMobile:!b.usWebMobile})}))}})))))))))},Ke=n(314),Ye=n(1003),Qe=n(1001),Ze=n(87);function $e(e){var t=e.userSave,n=e.savingUser,a=Object(v.b)().user,s={type:"",businessName:"",primaryContactName:"",location:{},address:"",avatar:!1,terms:!0,pictureFile:void 0,pictureFileExt:void 0,fileValid:!0},m={salesEmail:"",salesContactNumber:"",website:"",intro:"",distributionAreas:{}},b={purchasingEmail:"",purchasingContactNumber:"",deliveryInstruction:"",contactOptions:{}},h=Object(l.useState)(void 0),j=Object(c.a)(h,2),C=j[0],w=j[1],y=Object(l.useState)({}),N=Object(c.a)(y,2),S=N[0],k=N[1],x=Object(l.useState)(s),I=Object(c.a)(x,2),A=I[0],R=I[1],F=Object(l.useState)({}),_=Object(c.a)(F,2),D=_[0],G=_[1],z=Object(l.useState)(0),V=Object(c.a)(z,2),U=V[0],W=V[1],P=Object(l.useState)([54.00366,-2.547855]),q=Object(c.a)(P,2),H=q[0],X=q[1];Object(l.useEffect)((function(){0===U&&Object.keys(A).length!==Object.keys(s).length&&(R(s),G({}))}),[U,s,A]),Object(l.useEffect)((function(){"producer"===A.type&&Object.keys(A).length===Object.keys(s).length&&R(Object(i.a)(Object(i.a)({},A),m)),"retailer"===A.type&&Object.keys(A).length===Object.keys(s).length&&R(Object(i.a)(Object(i.a)({},A),b))}),[A,s,m,b]),Object(l.useEffect)((function(){C&&function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k,e.next=3,Object(Ye.a)("avatar");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();return function(){k({})}}),[C]);var L=function(){var e=Object(o.a)(r.a.mark((function e(){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},"producer"===A.type&&(!A.distributionAreas||A.distributionAreas.features&&A.distributionAreas.features.length||(n.distributionAreas="You need to save at least one distribution area. If you have already drawn a shape, make sure you click 'Finish' in order to proceed")),Object.keys(n).length){e.next=12;break}if(!C){e.next=8;break}return e.next=6,Object(Ye.b)(S,C);case 6:204===e.sent.status&&(o=Object(Qe.a)(a.sub,"avatar"));case 8:console.log("SAVING",Object(i.a)(Object(i.a)({},A),{},{avatarSource:o})),t(Object(i.a)(Object(i.a)({},A),{},{avatarSource:o})),e.next=13;break;case 12:G(n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(O.Helmet,null,u.a.createElement("title",null,"beerLocal - Create your profile"),u.a.createElement("meta",{name:"description",content:"Profile creation form"})),u.a.createElement(Ke.a,null,u.a.createElement(d.a,{basic:!0,textAlign:"center",className:"primary wrapper"},u.a.createElement(p.a,{as:"h1"},"Complete your profile"),u.a.createElement(M,{profileStage:U,setProfileStage:W,formValues:A,setFormValues:R}),u.a.createElement(Z,{formValues:A,setFormValues:R,formErrors:D,setFormErrors:G,profileStage:U,mapCentre:H,setMapCentre:X,avatarSaved:C,setAvatarSaved:w}),u.a.createElement(Le,{formValues:A,setFormValues:R,profileStage:U,mapCentre:H,formErrors:D,setFormErrors:G}),u.a.createElement(Be,{formValues:A,setFormValues:R,formErrors:D,setFormErrors:G,profileStage:U,mapCentre:H,setMapCentre:X,avatarSaved:C,setAvatarSaved:w}),u.a.createElement(Je,{formValues:A,setFormValues:R,profileStage:U}),u.a.createElement(T,{backClickHandler:function(){W(U-1)},forwardClickHandler:function(){var e={};if("retailer"===A.type)new E.a(A.purchasingContactNumber,"GB").isValid()||(e.purchasingContactNumber="This is not a valid phone number"),A.purchasingEmail||(e.purchasingEmail="This field is required"),A.primaryContactName||(e.primaryContactName="This field is required");else if("producer"===A.type){new E.a(A.salesContactNumber,"GB").isValid()||(e.salesContactNumber="This is not a valid phone number"),A.salesEmail||(e.salesEmail="This field is required")}A.businessName||(e.businessName="This field is required"),A.terms||(e.terms="This field is required"),A.location&&!A.location.lat&&(e.location="This field is required"),A.fileValid||(e.pictureFile="Invalid file type"),Object.keys(e).length?G(e):W(U+1)},profileStage:U,handleSubmit:L})),n&&u.a.createElement(f.a,{inverted:!0,active:!0,page:!0},u.a.createElement(g.a,{inverted:!0}))))}var et=Object(m.b)({savingUser:Object(Ze.d)()});var tt=Object(s.c)(et,(function(e){return{userSave:function(t){return e(Object(j.f)(t))}}}));t.default=Object(b.d)(tt)($e)},332:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var a=n(318),r=n.n(a),o=n(317),i=n.n(o),c=n(88),l=n.n(c),u=n(240),s=n.n(u),m=n(214),b=n.n(m),d=n(1392),p=n.n(d),f=n(0),g=function(e){return p()(b()(f.Children.toArray(e),f.isValidElement),"key")},h=function(e,t){var n={},a=[];return s()(l()(e),(function(e){i()(t,e)?a.length&&(n[e]=a,a=[]):a.push(e)})),[n,a]},E=function(e,t,n){return i()(n,e)?n[e]:t[e]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},a=h(e,t),o=r()(a,2),c=o[0],u=o[1];return s()(l()(t),(function(a){i()(c,a)&&s()(c[a],(function(a){n[a]=E(a,e,t)})),n[a]=E(a,e,t)})),s()(u,(function(a){n[a]=E(a,e,t)})),n}},501:function(e,t,n){"use strict";t.a=function(e,t){return"number"===typeof e||"string"===typeof e?e:e[t]}},997:function(e,t,n){"use strict";var a=n(967),r=n.n(a).a.getAsYouType("GB");t.a=r},998:function(e,t,n){"use strict";var a=n(45);function r(){var e=Object(a.a)(["\n  /**\n * The geosuggest module\n * NOTE: duplicated font-sizes' are for browsers which don't support rem (only IE 8)\n */\n  .geosuggest {\n    font-size: 18px;\n    font-size: 1rem;\n    position: relative;\n    /* width: 50%;\n  margin: 1em auto; */\n    text-align: left;\n  }\n  .geosuggest__input {\n    width: 100%;\n    border: 2px solid transparent;\n    box-shadow: 0 0 1px #3d464d;\n    padding: 0.5em 1em;\n    -webkit-transition: border 0.2s, box-shadow 0.2s;\n    transition: border 0.2s, box-shadow 0.2s;\n  }\n  .geosuggest__input:focus {\n    border-color: #267dc0;\n    box-shadow: 0 0 0 transparent;\n  }\n  .geosuggest__suggests {\n    position: absolute;\n    top: 100%;\n    left: 0;\n    right: 0;\n    max-height: 25em;\n    padding: 0;\n    margin-top: -1px;\n    background: #fff;\n    border: 2px solid #267dc0;\n    border-top-width: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    list-style: none;\n    z-index: 5;\n    -webkit-transition: max-height 0.2s, border 0.2s;\n    transition: max-height 0.2s, border 0.2s;\n  }\n  .geosuggest__suggests--hidden {\n    max-height: 0;\n    overflow: hidden;\n    border-width: 0;\n  }\n\n  /**\n * A geosuggest item\n */\n  .geosuggest__item {\n    font-size: 18px;\n    font-size: 1rem;\n    padding: 0.5em 0.65em;\n    cursor: pointer;\n  }\n  .geosuggest__item:hover,\n  .geosuggest__item:focus {\n    background: #f5f5f5;\n  }\n  .geosuggest__item--active {\n    background: #267dc0;\n    color: #fff;\n  }\n  .geosuggest__item--active:hover,\n  .geosuggest__item--active:focus {\n    background: #ccc;\n  }\n  .geosuggest__item__matched-text {\n    font-weight: bold;\n  }\n\n  .geosuggest__label {\n    display: block;\n    margin: 0 0 0.28571429rem 0;\n    color: rgba(0, 0, 0, 0.87);\n    font-size: 0.92857143em;\n    font-weight: 700;\n    text-transform: none;\n  }\n"]);return r=function(){return e},e}var o=n(46).b.div(r());t.a=o}}]);
//# sourceMappingURL=11.da279977.chunk.js.map